{% extends "webpage/layout.html" %}
{% load django_bootstrap_breadcrumbs %}
{% load crispy_forms_tags %}
{% load i18n %}
{% block title %}{% trans "files"|capfirst %}{% endblock %}
{% block breadcrumbs %}
    {% breadcrumb "files" "maps:files-index" %}
    {% trans "file +" as add_file %}
    {% breadcrumb add_file '' %}
{% endblock %}
{% block content %}
    <div class="container">
        <div class="panel-body">
            {% crispy form %}
        </div>
    </div>
    <script>
        $(document).ready(function () {
            alert('{{ allowed_upload_size }}');
            $('#id_file').on("change", function() {
                if ($('#id_file')[0].files[0].size > {{ allowed_upload_size }}) {
                    alert('This file is too big.')8315133
                }
                /* if name is empty, fill with filename without the extension */
                if ($('#id_name').val() == '') {
                    var filename = $('#id_file')[0].files.length ? $('#id_file')[0].files[0].name : '';
                    $('#id_name').val(filename.replace(/\.[^/.]+$/, ""));
                }
            });
        });
    </script>
{% endblock %}
