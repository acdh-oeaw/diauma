{% extends "webpage/layout.html" %}
{% load maps_extras %}
{% load mptt_tags %}
{% load static %}
{% load django_bootstrap_breadcrumbs %}
{% load render_table from django_tables2 %}
{% block title %}Diauma - Model{% endblock %}
{% block content %}
    {% block breadcrumbs %}
        {% breadcrumb "Types" "maps:type" %}
    {% endblock %}
    <ul>
        {% recursetree nodes %}
            <li>
                {{ node.name }}
                {% if not node.is_leaf_node %}
                    <ul class="children">
                        {{ children }}
                    </ul>
                {% endif %}
            </li>
        {% endrecursetree %}
    </ul>
    {% drilldown_tree_for_node category as drilldown %}
    {% for node,structure in drilldown|tree_info %}
        {% if structure.new_level %}<ul><li>{% else %}</li><li>{% endif %}
        {% if node == genre %}
            <strong>{{ node.name }}</strong>
        {% else %}
            <a href="{{ node.get_absolute_url }}">{{ node.name }}</a>
            {% if node.parent_id == genre.pk %}({{ node.game_count }}){% endif %}
        {% endif %}
        {% for level in structure.closed_levels %}</li></ul>{% endfor %}
    {% endfor %}
{% endblock %}
